# video-source-detector

Generated by Cursor. 

Certainly! I'd be happy to help you develop a Google Chrome extension that detects the sources of videos. Let's break this down into steps and create a basic structure for your extension.

1. First, create a new directory for your extension.

2. Create the following files in your directory:

```
manifest.json
background.js
content.js
popup.html
popup.js
```

3. Let's start with the `manifest.json` file:

```json:manifest.json
{
  "manifest_version": 3,
  "name": "Video Source Detector",
  "version": "1.0",
  "description": "Detects the sources of videos on web pages",
  "permissions": ["activeTab"],
  "background": {
    "service_worker": "background.js"
  },
  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["content.js"]
    }
  ],
  "action": {
    "default_popup": "popup.html"
  }
}
```

This manifest file sets up the basic structure and permissions for your extension.

4. Create a simple `background.js`:

```javascript:background.js
chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
  if (request.action === "getVideoSources") {
    chrome.tabs.query({active: true, currentWindow: true}, (tabs) => {
      chrome.tabs.sendMessage(tabs[0].id, {action: "getVideoSources"}, (response) => {
        sendResponse(response);
      });
    });
    return true;
  }
});
```

5. Now, let's create the `content.js` file to detect video sources:

```javascript:content.js
function getVideoSources() {
  const videoElements = document.getElementsByTagName('video');
  const sources = [];

  for (let video of videoElements) {
    const sourceElements = video.getElementsByTagName('source');
    for (let source of sourceElements) {
      sources.push(source.src);
    }
    if (video.src) {
      sources.push(video.src);
    }
  }

  return sources;
}

chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
  if (request.action === "getVideoSources") {
    sendResponse({sources: getVideoSources()});
  }
});
```

6. Create a simple `popup.html`:

```html:popup.html
<!DOCTYPE html>
<html>
<head>
  <title>Video Source Detector</title>
  <style>
    body { width: 300px; padding: 10px; }
    ul { padding-left: 20px; }
  </style>
</head>
<body>
  <h2>Video Sources</h2>
  <div id="sources"></div>
  <script src="popup.js"></script>
</body>
</html>
```

7. Finally, create the `popup.js`:

```javascript:popup.js
document.addEventListener('DOMContentLoaded', () => {
  chrome.runtime.sendMessage({action: "getVideoSources"}, (response) => {
    const sourcesDiv = document.getElementById('sources');
    if (response && response.sources && response.sources.length > 0) {
      const ul = document.createElement('ul');
      response.sources.forEach(source => {
        const li = document.createElement('li');
        li.textContent = source;
        ul.appendChild(li);
      });
      sourcesDiv.appendChild(ul);
    } else {
      sourcesDiv.textContent = "No video sources found on this page.";
    }
  });
});
```

This basic extension will detect video sources on the current page and display them in a popup when you click the extension icon.

To use this extension:

1. Open Google Chrome and go to `chrome://extensions/`
2. Enable "Developer mode" in the top right corner
3. Click "Load unpacked" and select the directory containing your extension files
4. The extension should now appear in your browser toolbar

When you click on the extension icon, it will show a list of video sources found on the current page.

This is a basic implementation and can be expanded to include more features, such as detecting embedded videos from platforms like YouTube or Vimeo, or providing more detailed information about the video sources.